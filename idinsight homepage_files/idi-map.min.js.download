!function(e){e(document).ready(function(){e(".js-idi-map").length>0&&am4core.ready(function(){var t=am4core.create("chartdiv",am4maps.MapChart);t.geodataSource.url=themeVariables.templateUrl+"/assets/js/map/world-changed-2.json",t.projection=new am4maps.projections.Miller;var a=t.series.push(new am4maps.MapPolygonSeries),o=a.mapPolygons.template;a.useGeodata=!0,o.fill=am4core.color("#dee5f7"),a.fillOpacity=1,a.id="world",a.hiddenInLegend=!0,a.mapPolygons.template.nonScalingStroke=!0;var i=["AQ"],n=!1,s=!1;function r(e,a){c();var o=t.series.push(new am4maps.MapImageSeries),i=o.mapImages.template;o.data=a,o.id="markerSeries";var n=i.createChild(am4core.Sprite);n.path="M9 1C4.589 1 1 4.804 1 9.482 1 13.957 8.802 25 9 25c.198 0 8-11.026 8-15.518C17 4.804 13.411 1 9 1z",n.width=28,n.height=28,n.nonScaling=!0,n.fill="#7CCD98",n.stroke="#1C2F62",n.horizontalCenter="middle",n.verticalCenter="bottom",n.tooltipHTML="<div class='c-map__tooltip'><h3 class='c-map__tooltip-title'>{name}</h3>"+(n.description?"<p class='c-map__tooltip-description'>{description}</p>":"")+(n.link?"<a class='c-map__tooltip-link' href='{link}'>Read more</a>":"")+"</div>",i.propertyFields.latitude="latitude",i.propertyFields.longitude="longitude",i.nonScalingStroke=!0,i.tooltipPosition="fixed",o.tooltip.label.interactionsEnabled=!0,o.tooltip.keepTargetHover=!0,i.tooltipHTML=" <div class='c-map__tooltip'><h3 class='c-map__tooltip-title'>{name}</h3><p class='c-map__tooltip-description'>{description}</p><a class='c-map__tooltip-link' href='{link}'>Read more</a></div>",o.tooltip.background.fill="#ffffff",o.tooltip.label.maxWidth=230,o.tooltip.label.wrap=!0,o.tooltip.fillOpacity=1,o.tooltip.getFillFromObject=!1}function l(e,a,o){var i=!1;if(i="region"===e?s:n,t.series.length>0&&i)for(var r=0;r<a;r++){var l=t.series.indexOf(t.map.getKey(e+r));o?t.series.getIndex(l).hide():t.series.getIndex(l).show()}}function p(e,t,a){var o=e.tooltip;o.label.interactionsEnabled=!0,o.keepTargetHover=!0,a.tooltipPosition="fixed",a.tooltipHTML=" <div class='c-map__tooltip'><h3 class='c-map__tooltip-title'>{series.name}</h3>"+(e.description?"<p class='c-map__tooltip-description'>{series.description}</p>":"")+(e.link?"<a class='c-map__tooltip-link' href='{series.link}'>Read more</a>":"")+"</div>",o.background.fill="#ffffff",o.fillOpacity=1,o.label.maxWidth=230,o.label.wrap=!0,o.getFillFromObject=!1,o.background.pointerBaseWidth=1,o.background.pointerLength=1}function c(){if(t.series.length>0){var e=t.series.indexOf(t.map.getKey("markerSeries"));e>-1&&t.series.removeIndex(e).dispose()}}a.exclude=["AQ"],function(){t.zoomControl=new am4maps.ZoomControl;var e=new am4core.Button;e.events.on("hit",function(){t.goHome()}),e.icon=new am4core.Sprite,e.padding(7,5,7,5),e.width=30,e.icon.path="M16,8 L14,8 L14,16 L10,16 L10,10 L6,10 L6,16 L2,16 L2,8 L0,8 L8,0 L16,8 Z M16,8",e.marginBottom=10,e.parent=t.zoomControl,e.insertBefore(t.zoomControl.plusButton),t.zoomControl.plusButton.background.fill="#FFFFFF",t.zoomControl.plusButton.background.stroke="#ccd4da",t.zoomControl.minusButton.background.fill="#FFFFFF",t.zoomControl.minusButton.background.stroke="#ccd4da",e.background.fill="#FFFFFF",e.background.stroke="#ccd4da"}(),e(document).ready(function(){e(e(".js-map-button")[0]).trigger("click")}),console.log("trigger click here"),e(".js-map-regions-btn").on("click",function(){if(e(".js-map-legend--countries").hide(),e(".js-map-legend--projects").hide(),e(".js-map-button").removeClass("is-active"),e(this).addClass("is-active"),c(),l("country",mapVariables.countryData.length,!0),!1===s){var a=0;regionData=mapVariables.regionData,regionData.forEach(function(e){var o=t.series.push(new am4maps.MapPolygonSeries);o.id="region"+a,o.name=e.name,o.description=e.description,o.link=e.link,o.useGeodata=!0;var n=[];e.data.forEach(function(e){n.push(e.id),i.push(e.id),i.push(e.id)}),o.include=n,o.setStateOnChildren=!0,o.calculateVisualCenter=!0,o.mapPolygons.template.fill="#1C2F62";var s=o.mapPolygons.template;p(o,"region",s),s.states.create("hover").properties.fill="#d49e00",o.tooltip.dy=20,s.events.on("over",function(e){o.mapPolygons.each(function(e){e.isHover=!0})}),s.events.on("out",function(e){o.mapPolygons.each(function(e){e.isHover=!1})}),a++,o.data=JSON.parse(JSON.stringify(e.data))}),s=!0}else l("region",mapVariables.regionData.length,!1)}),e(".js-map-countries-btn").on("click",function(){if(e(".js-map-legend--countries").show(),e(".js-map-legend--projects").hide(),e(".js-map-button").removeClass("is-active"),e(this).addClass("is-active"),c(),l("region",mapVariables.regionData.length,!0),!1===n){countryData=mapVariables.countryData;var a=0;countryData.forEach(function(e){var o=t.series.push(new am4maps.MapPolygonSeries);o.id="country"+a,o.name=e.name,o.description=e.description,o.link=e.link,o.useGeodata=!0;var n,s=[];s.push(e.id),i.push(e.id),o.include=s,a++,o.mapPolygons.template.states.create("hover").properties.fill="#d49e00",o.mapPolygons.template.fill=e.fill,o.mapPolygons.template.events.on("hit",function(e){n&&(n.isActive=!1),e.target.series.chart.zoomToMapObject(e.target),n!==e.target&&(n=e.target)}),p(o,"country",o.mapPolygons.template),o.data=JSON.parse(JSON.stringify(countryData))}),n=!0}else l("country",mapVariables.countryData.length,!1)}),e(".js-map-projects-btn").on("click",function(){e(".js-map-legend--countries").hide(),e(".js-map-legend--offices").hide(),e(".js-map-legend--projects").show(),e(".js-map-button").removeClass("is-active"),e(this).addClass("is-active"),r("project",mapVariables.projectData),l("country",mapVariables.countryData.length,!0),l("region",mapVariables.regionData.length,!0)}),e(".js-map-offices-btn").on("click",function(){e(".js-map-legend--countries").hide(),e(".js-map-legend--projects").hide(),e(".js-map-legend--offices").show(),e(".js-map-button").removeClass("is-active"),e(this).addClass("is-active"),r("office",mapVariables.officeData),l("country",mapVariables.countryData.length,!0),l("region",mapVariables.regionData.length,!0)})})})}(jQuery);
